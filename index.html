<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>LabCore | Evaluación de ingreso</title>

  <link rel="stylesheet" href="src/css/styles.css" />
  <link rel="stylesheet" href="src/css/fant.css" />
</head>

<body>
  <main class="wrap">

    <!-- Header -->
      <header class="topbar">
        <div class="topbar-inner">
          <div class="brandline">
            <div class="logo-badge">
              <img src="src/img/LabCore.webp" alt="LabCore Logo" class="brand-logo">
            </div>

            <div class="brandcopy">
              <img src="src/img/LabCoretxt.webp" alt="LabCore Tech" class="brand-text">
              <div class="brand-subtitle">Proceso de Selección - LabCore Tech</div>
            </div>
          </div>
        </div>
      </header>

    <!-- Step 1: Form -->
    <section id="candidateForm" class="card">
      <h1 class="title">Datos del candidato</h1>
      <p class="subtitle">Los campos con <span class="req">*</span> son obligatorios.</p>

      <form class="grid" autocomplete="on">

        <div class="field">
          <label for="firstName">Nombre <span class="req">*</span></label>
          <input id="firstName" class="input" type="text" placeholder="Escribe tu nombre" />
        </div>

        <div class="field">
          <label for="lastName">Apellido <span class="req">*</span></label>
          <input id="lastName" class="input" type="text" placeholder="Escribe tu apellido" />
        </div>

        <div class="field">
          <label for="cedula">Cédula <span class="req">*</span></label>
          <input id="cedula" class="input" type="text" inputmode="numeric" placeholder="Solo números" />
        </div>

        <div class="field">
          <label for="role">Cargo a concursar <span class="req">*</span></label>
          <select id="role" class="input">
            <option value="" selected>Cargando...</option>
          </select>
        </div>

        <div class="field">
          <label for="email">Correo <span class="req">*</span></label>
          <div class="inputWrap">
            <input id="email" class="input" type="email" placeholder="tucorreo@dominio.com" />
            <span class="inputIcon" aria-hidden="true"></span>
          </div>
        </div>

        <div class="field">
          <label for="phone">Celular <span class="req">*</span></label>
          <input id="phone" class="input" type="text" inputmode="tel" placeholder="Ej: 3001234567" />
        </div>

        <div class="field">
          <label for="github">GitHub</label>
          <input id="github" class="input" type="url" placeholder="https://github.com/tuusuario" />
        </div>


        <div class="field">
          <label for="cvFile">Hoja de vida <span class="req">*</span></label>

          <!-- input real -->
          <input id="cvFile" type="file" accept="application/pdf" class="hidden" />

          <!-- picker visual -->
          <div id="cvPicker" class="filePicker" tabindex="0" role="button" aria-label="Adjuntar hoja de vida PDF">
            Haz clic para adjuntar tu PDF
          </div>
        </div>

        <div class="field">
          <label for="linkedin">LinkedIn</label>
          <input id="linkedin" class="input" type="url" placeholder="https://www.linkedin.com/in/tuperfil" />
        </div>

        <div class="field">
          <label for="university">Universidad <span class="req">*</span></label>
          <input id="university" class="input" type="text" placeholder="Escribe tu universidad" />
        </div>

        <div class="field">
          <label for="career">Carrera <span class="req">*</span></label>
        
          <input id="career" name="career" class="input"
                 list="careerList"
                 placeholder="Selecciona... o escribe"
                 autocomplete="off" required />
        
          <datalist id="careerList">
            <option value="Ingeniería de Sistemas"></option>
            <option value="Tecnología en Sistemas"></option>
            <option value="Desarrollo de Software"></option>
            <option value="Ingeniería de Software"></option>
          </datalist>
        </div>
        
        <div class="field">
          <label for="semester">Semestre <span class="req">*</span></label>
        
          <input id="semester" name="semester" class="input"
                 list="semesterList"
                 placeholder="Selecciona... o escribe"
                 inputmode="numeric"
                 autocomplete="off" required />
        
          <datalist id="semesterList">
            <option value="1"></option><option value="2"></option><option value="3"></option><option value="4"></option><option value="5"></option>
            <option value="6"></option><option value="7"></option><option value="8"></option><option value="9"></option><option value="10"></option>
            <option value="Graduado"></option><option value="Suspendido"></option><option value="Terminado"></option>
          </datalist>
        </div>

    
        <div class="field field--full">
          <label class="check">
            <input id="acceptPolicy" type="checkbox" />
            <span>
              Acepto la
              <a href="politica-datos.html"
                onclick="window.open('politica-datos.html','politica','width=980,height=720,scrollbars=yes,resizable=yes'); return false;"
                style="color: var(--primary2); text-decoration:none;">
                Política de tratamiento de datos.
              </a>
            </span>
          </label>
        </div>

        <!-- ✅ NUEVO: info de servicio (Render wake) -->
        <div id="serviceInfo" class="alert alert--info hidden" role="status"></div>

        <div id="formError" class="alert alert--danger hidden" role="alert"></div>

        <div class="actions">
          <button id="btnStart" class="btn primary" type="button" disabled>Iniciar prueba</button>
        </div>
      </form>
    </section>

    <!-- Step 2: Exam -->
    <section id="examCard" class="card is-hidden">
      <div class="examTop">
        <h2 class="title">Evaluación</h2>

        <div id="timerBox" class="timerBox hidden" aria-live="polite">
          <div class="timer">
            <div class="timer__label">Tiempo</div>
            <div id="timer" class="timer__value">10:00</div>
            <div id="timeHint" class="timeHint hidden" aria-live="polite"></div>
          </div>
        </div>
      </div>

      <!-- ✅ Se mantiene para backend, pero NO visible al candidato -->
      <div class="examMeta hidden" aria-hidden="true">Incidentes: <b id="incidents">0</b></div>

      <div id="examError" class="alert alert--danger hidden" role="alert"></div>

      <div id="questionHost" class="questionHost"></div>

      <div class="examActions examActions--center">
        <button id="btnPrev" class="btn btn--ghost hidden" type="button">‹</button>
        <button id="btnNext" class="btn btn--ghost" type="button">›</button>
        <button id="btnSubmit" class="btn primary hidden" type="button">Enviar evaluación</button>
      </div>
    </section>

  </main>

  <!-- Modal info - Mejorado -->
  <div id="modalInfo" class="modal hidden" aria-hidden="true">
    <div class="modal__backdrop" data-close="1"></div>
    <div class="modal__panel" role="dialog" aria-modal="true" aria-labelledby="miTitle">
      <!-- Cabecera con título y botón X a la derecha -->
      <div class="modal__header">
        <h3 id="miTitle">Antes de iniciar</h3>
        <!-- Botón X de cerrar - POSICIONADO A LA DERECHA -->
        <button class="modal__close" type="button" data-close="1" aria-label="Cerrar">
          <span aria-hidden="true">×</span>
        </button>
      </div>
      
      <div class="modal__content">
        <p>
          Esta prueba tiene una duración aproximada de <b>10 minutos</b>. 
          Se recomienda contar con este tiempo disponible para poder realizarla sin interrupciones.
          La prueba se iniciará de manera inmediata.
        </p>
      </div>
      
      <div class="modal__actions">
        <button id="btnContinue" class="btn primary" type="button">Continuar</button>
      </div>
    </div>
  </div>

  <!-- Modal result - Mejorado -->
  <div id="modalResult" class="modal hidden" aria-hidden="true">
    <div class="modal__backdrop" data-close="1"></div>
    <div class="modal__panel" role="dialog" aria-modal="true" aria-labelledby="mrTitle">
      <!-- Cabecera con título y botón X a la derecha -->
      <div class="modal__header">
        <h3 id="mrTitle">Resultado</h3>
        <!-- Botón X de cerrar - POSICIONADO A LA DERECHA -->
        <button class="modal__close" type="button" data-close="1" aria-label="Cerrar">
          <span aria-hidden="true">×</span>
        </button>
      </div>
      
      <div class="modal__content">
        <div class="modal__icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
            <path fill-rule="evenodd" d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm13.36-1.814a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z" clip-rule="evenodd" />
          </svg>
        </div>
        <p id="mrMsg">Evaluación enviada correctamente.</p>
      </div>
      
      <div class="modal__actions">
        <button id="btnCloseResult" class="btn primary" type="button">Cerrar</button>
      </div>
    </div>
  </div>

  <script src="src/js/fant.js"></script>
  <script src="src/js/app.js"></script>
</body>

</html>
